<!--pages/explore/eventDetail.wxml-->
<view class="page">
  <view class="event-detail-title">{{eventDetail.topic}}</view>
  <view class="flex-wrp">
    <view class="flex-item">
    <view class="event-detail-author">Presenter</view>
      <image class="event-detail-avatar" mode="scaleToFill" src="{{eventDetail.owner.avatarUrl}}"></image>
      <view class="event-detail-nickname">{{eventDetail.owner.nickName}}</view>
    </view>
    <view class="flex-item event-detail-duration">
      <text>When: </text>
      <text>{{eventDetail.startDate}} - {{eventDetail.endDate}}</text>
    </view>
    <view class="flex-item event-detail-location">
    <!-- Use icon instead later -->
    <text>Location: </text>{{eventDetail.location.name}}
    </view>
    <view class="flex-item event-detail-location">
      <text>Difficulty: </text>{{difficulties[eventDetail.difficulty]}}
    </view>
    <view class="flex-item event-detail-location">
      <text>Direction: </text>{{eventDetail.direction.name}}
    </view>
    <view class="flex-item event-detail-location">
    <text>Enrollments: </text>{{eventDetail.enrollments}}
    </view>
    <view class="flex-item event-detail-desc">
    {{eventDetail.description}}
    </view>
    
    <block wx:if="{{isOwner}}">
      <view class="flex-item" wx:if="{{isOwner}}">
        <button bindtap='onStartSession' class="session-start-btn" type="primary" disabled="{{startBtnDisabled}}">{{startBtnVal}}</button>
      </view>
      <view class="flex-item" wx:if="{{isOwner}}">
        <button bindtap='onManageQuiz' class="session-quiz-btn" type="primary" disabled="{{quizBtnDisabled}}">{{quizBtnVal}}</button>
      </view>
    </block>
    <block wx:else>
      <view wx:if="{{disabled}}" class="flex-item">
        <modal id="checkInModal" hidden="{{isCheckInModalHidden}}" title="Please type check in code" confirm-text="Submit" cancel-text="Cancel" bindconfirm="submitCheckInCode" bindcancel="cancelCheckIn">
          <input name="checkInCode" bindinput="onCheckInCodeInput" class="weui-input" placeholder="Check in Code" />
        </modal>
        <button bindtap='onCheckIn' type="primary" disabled="{{checkInDisabled}}">{{checkInBtnVal}}</button>
      </view>
      <view wx:if="{{disabled}}" class="flex-item">
        <button bindtap='onStartQuiz' type="primary" disabled="{{startQuizBtnDisabled}}">{{startQuizBtnVal}}</button>
      </view>
      <view class="flex-item">
        <button bindtap='onRegister' type="primary" disabled="{{disabled}}" loading="{{loading}}">{{registerBtnVal}}</button>
      </view>
    </block>
  </view>
</view>